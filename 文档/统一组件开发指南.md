# ç»Ÿä¸€ç»„ä»¶å¼€å‘æŒ‡å—

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

### 1. ç»Ÿä¸€é…ç½®ä¼˜å…ˆ
- âœ… **å¿…é¡»**ï¼šæ‰€æœ‰ç»„ä»¶éƒ½ä½¿ç”¨ç»Ÿä¸€çš„è®¾è®¡ç³»ç»Ÿé…ç½®
- âœ… **å¿…é¡»**ï¼šä¼˜å…ˆä½¿ç”¨ç°æœ‰çš„å·¥å…·å‡½æ•°å’ŒHook
- âŒ **ç¦æ­¢**ï¼šé‡å¤å®ç°å·²æœ‰çš„åŠŸèƒ½
- âŒ **ç¦æ­¢**ï¼šç¡¬ç¼–ç é¢œè‰²ã€å­—ä½“ã€é—´è·ç­‰æ ·å¼å€¼

### 2. æ™ºèƒ½å¯¹æ¯”åº¦ç³»ç»Ÿ
- âœ… **å¿…é¡»**ï¼šæ‰€æœ‰éœ€è¦èƒŒæ™¯è‰²å’Œæ–‡å­—è‰²çš„ç»„ä»¶ä½¿ç”¨ `getOptimalTextColor`
- âœ… **å¿…é¡»**ï¼šæŒ‰é’®ç±»ç»„ä»¶ä½¿ç”¨ `SmartButton` æˆ–æ™ºèƒ½å¯¹æ¯”åº¦å·¥å…·
- âŒ **ç¦æ­¢**ï¼šè‡ªå®šä¹‰å¯¹æ¯”åº¦è®¡ç®—å‡½æ•°
- âŒ **ç¦æ­¢**ï¼šä½¿ç”¨å›ºå®šçš„æ–‡å­—é¢œè‰²å€¼

## ğŸ› ï¸ å¼€å‘è§„èŒƒ

### æŒ‰é’®ç»„ä»¶å¼€å‘

#### âœ… æ­£ç¡®åšæ³•
```typescript
import { getOptimalTextColor } from "@/lib/contrast-utils"

export function MyButton({ backgroundColor, variant = 'primary' }) {
  const textColor = useMemo(() => 
    getOptimalTextColor(backgroundColor, variant), 
    [backgroundColor, variant]
  )
  
  return (
    <button 
      style={{ 
        backgroundColor, 
        color: textColor 
      }}
    >
      æŒ‰é’®æ–‡å­—
    </button>
  )
}
```

#### âŒ é”™è¯¯åšæ³•
```typescript
// ä¸è¦è¿™æ ·åšï¼
function getContrastColor(hexColor: string): string {
  // è‡ªå®šä¹‰å¯¹æ¯”åº¦è®¡ç®—é€»è¾‘
  return yiq >= 128 ? "#000000" : "#ffffff"
}

export function MyButton({ backgroundColor }) {
  const textColor = getContrastColor(backgroundColor) // è¿åç»Ÿä¸€åŸåˆ™
  // ...
}
```

### ä½¿ç”¨SmartButtonç»„ä»¶

#### âœ… æ¨èåšæ³•
```typescript
import { SmartButton } from "@/components/ui/smart-button"

export function MyComponent() {
  return (
    <SmartButton 
      customBackgroundColor="#FF6B6B"
      variant="primary"
    >
      æ™ºèƒ½æŒ‰é’®
    </SmartButton>
  )
}
```

### ä½¿ç”¨ç»Ÿä¸€è®¾è®¡ä»¤ç‰Œ

#### âœ… æ­£ç¡®åšæ³•
```typescript
import { useDesignTokens } from "@/components/providers/design-tokens-provider"

export function MyComponent() {
  const { tokens } = useDesignTokens()
  
  return (
    <div 
      style={{ 
        backgroundColor: tokens.colors.primary,
        color: getOptimalTextColor(tokens.colors.primary, 'primary')
      }}
    >
      å†…å®¹
    </div>
  )
}
```

#### âŒ é”™è¯¯åšæ³•
```typescript
// ä¸è¦ç¡¬ç¼–ç ï¼
export function MyComponent() {
  return (
    <div 
      style={{ 
        backgroundColor: "#3b82f6", // ç¡¬ç¼–ç é¢œè‰²
        color: "#ffffff" // ç¡¬ç¼–ç æ–‡å­—é¢œè‰²
      }}
    >
      å†…å®¹
    </div>
  )
}
```

## ğŸ” çº¦æŸæ£€æŸ¥æµç¨‹

### å¼€å‘å‰æ£€æŸ¥
1. æŸ¥çœ‹ç°æœ‰ç»„ä»¶åº“ï¼Œä¼˜å…ˆå¤ç”¨
2. æ£€æŸ¥æ˜¯å¦æœ‰ç›¸å…³çš„å·¥å…·å‡½æ•°
3. ç¡®è®¤è®¾è®¡ä»¤ç‰Œé…ç½®

### å¼€å‘ä¸­éªŒè¯
```typescript
// ä½¿ç”¨çº¦æŸæ£€æŸ¥å™¨
import { validateComponent } from "@/lib/component-constraint-checker"

const violations = validateComponent(MyComponent)
if (violations.length > 0) {
  console.warn('ç»„ä»¶è¿åè®¾è®¡çº¦æŸ:', violations)
}
```

### å¼€å‘åæµ‹è¯•
1. æµ‹è¯•ä¸åŒä¸»é¢˜ä¸‹çš„è¡¨ç°
2. éªŒè¯æ™ºèƒ½å¯¹æ¯”åº¦æ•ˆæœ
3. ç¡®ä¿å“åº”å¼è®¾è®¡æ­£å¸¸

## ğŸ“‹ å¸¸è§è¿åçº¦æŸçš„æƒ…å†µ

### 1. é‡å¤å®ç°å¯¹æ¯”åº¦è®¡ç®—
```typescript
// âŒ è¿åçº¦æŸ
function getContrastColor(hexColor: string): string {
  // è‡ªå®šä¹‰å®ç°
}

// âœ… æ­£ç¡®åšæ³•
import { getOptimalTextColor } from "@/lib/contrast-utils"
```

### 2. ç¡¬ç¼–ç æ ·å¼å€¼
```typescript
// âŒ è¿åçº¦æŸ
<div style={{ color: "#333333", fontSize: "14px" }}>

// âœ… æ­£ç¡®åšæ³•
<div className="text-gray-700 text-sm">
```

### 3. ä¸ä½¿ç”¨ç»Ÿä¸€é…ç½®
```typescript
// âŒ è¿åçº¦æŸ
const primaryColor = "#3b82f6"

// âœ… æ­£ç¡®åšæ³•
const { tokens } = useDesignTokens()
const primaryColor = tokens.colors.primary
```

## ğŸš€ æœ€ä½³å®è·µ

### 1. ç»„ä»¶å¼€å‘æ¨¡æ¿
```typescript
"use client"

import { useMemo } from "react"
import { cn } from "@/lib/utils"
import { getOptimalTextColor } from "@/lib/contrast-utils"
import { useDesignTokens } from "@/components/providers/design-tokens-provider"

interface MyComponentProps {
  variant?: 'primary' | 'secondary'
  backgroundColor?: string
  className?: string
}

export function MyComponent({ 
  variant = 'primary', 
  backgroundColor,
  className 
}: MyComponentProps) {
  const { tokens } = useDesignTokens()
  
  // ä½¿ç”¨ç»Ÿä¸€é…ç½®
  const bgColor = backgroundColor || tokens.colors.primary
  const textColor = useMemo(() => 
    getOptimalTextColor(bgColor, variant), 
    [bgColor, variant]
  )
  
  return (
    <div 
      className={cn("base-styles", className)}
      style={{ 
        backgroundColor: bgColor,
        color: textColor 
      }}
    >
      å†…å®¹
    </div>
  )
}
```

### 2. æµ‹è¯•æ¨¡æ¿
```typescript
// æµ‹è¯•ä¸åŒèƒŒæ™¯è‰²ä¸‹çš„è¡¨ç°
const testColors = ["#FF6B6B", "#4ECDC4", "#000000", "#FFFFFF"]

testColors.forEach(color => {
  const textColor = getOptimalTextColor(color, 'primary')
  // éªŒè¯å¯¹æ¯”åº¦æ˜¯å¦è¶³å¤Ÿ
  expect(checkWCAGContrast(color, textColor, 'AA')).toBe(true)
})
```

## ğŸ“š ç›¸å…³èµ„æº

- [è®¾è®¡ä»¤ç‰Œç³»ç»Ÿæ–‡æ¡£](./è®¾è®¡ç³»ç»Ÿä¸çº¦æŸç³»ç»Ÿæ¶æ„æ–‡æ¡£.md)
- [å¼€å‘çº¦æŸæ–‡æ¡£](./å¼€å‘çº¦æŸæ–‡æ¡£.md)
- [æ™ºèƒ½å¯¹æ¯”åº¦å·¥å…·æºç ](../lib/contrast-utils.ts)
- [SmartButtonç»„ä»¶æºç ](../components/ui/smart-button.tsx)

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å‘åå…¼å®¹**ï¼šä¿®æ”¹ç°æœ‰ç»„ä»¶æ—¶ç¡®ä¿ä¸ç ´åç°æœ‰åŠŸèƒ½
2. **æ€§èƒ½è€ƒè™‘**ï¼šä½¿ç”¨ `useMemo` ç¼“å­˜è®¡ç®—ç»“æœ
3. **ç±»å‹å®‰å…¨**ï¼šç¡®ä¿æ‰€æœ‰propséƒ½æœ‰æ­£ç¡®çš„TypeScriptç±»å‹
4. **æµ‹è¯•è¦†ç›–**ï¼šæ–°ç»„ä»¶å¿…é¡»æœ‰å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹

---

éµå¾ªè¿™äº›æŒ‡å—ï¼Œç¡®ä¿æ‰€æœ‰ç»„ä»¶éƒ½ç¬¦åˆç»Ÿä¸€è®¾è®¡è§„èŒƒï¼Œé¿å…é‡å¤å®ç°å’Œè¿åçº¦æŸçš„é—®é¢˜ã€‚
